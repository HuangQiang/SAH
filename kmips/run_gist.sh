#!/bin/bash
make clean
make -j

# ------------------------------------------------------------------------------
#  Gist
# ------------------------------------------------------------------------------
name=Gist
n=982694
qn=100
d=960
data=../data/bin/${name}/${name}.data 
query=../data/bin/${name}/${name}.mips.query 
truth=../data/bin/${name}/${name}.mips.truth
folder=../results/${name}/

# ------------------------------------------------------------------------------
#  Ground Truth
# ------------------------------------------------------------------------------
./mips -alg 0 -n ${n} -qn ${qn} -d ${d} -ds ${data} -qs ${query} -ts ${truth}

# ------------------------------------------------------------------------------
#  Linear Scan
# ------------------------------------------------------------------------------
./mips -alg 1 -n ${n} -qn ${qn} -d ${d} -ds ${data} -qs ${query} -ts ${truth} \
  -of ${folder}

# ------------------------------------------------------------------------------
#  H2_ALSH
# ------------------------------------------------------------------------------
for b in 0.1 0.3 0.5 0.7 0.9
do 
  ./mips -alg 2 -n ${n} -qn ${qn} -d ${d} -b ${b} -ds ${data} -qs ${query} \
    -ts ${truth} -of ${folder}
done

# ------------------------------------------------------------------------------
#  SA-ALSH
# ------------------------------------------------------------------------------
for b in 0.1 0.3 0.5 0.7 0.9 
do 
  for K in 64 128 192 256 
  do 
    ./mips -alg 3 -n ${n} -qn ${qn} -d ${d} -K ${K} -b ${b} -ds ${data} \
      -qs ${query} -ts ${truth} -of ${folder}
  done
done
